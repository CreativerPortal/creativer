        <link rel="stylesheet" href="/css/pages/personal_page.css">

        <div class="row slid  padding-right_0" ng-show="user">

            <h3 class="lobster name__user"><a href="#/[[ user.id ]]">[[ user.username ]] [[ user.lastname ]]</a></h3>

            <div class="col-sm-5 user padding-left_0">
                {{ render(controller('CreativerFrontBundle:Default:userInfoTmp', {'id': id})) }}
            </div>

            <div class="col-sm-7 album" ng-init="count_albums=3">
                <a ng-if="user.id == $root.id_user" href="/app_dev.php/#/create_album" class="add_photo btn button_message early-message text-center text-white right pointer margin-right_5"><span class="glyphicon glyphicon-picture"></span>  <span class="fs_0-9">Создать альбом</span></a>
                <h4 class="lobster text-gray">Альбомы</h4>
                <div class="album__element" ng-repeat="album in user.albums.slice(0,count_albums)">

                    <a href="#/edit_album/[[ album.id ]]" class="glyphicon glyphicon-pencil edit__album-person ng-isolate-scope" edit-pain="info">
                    </a>


                    <a href="#/album/[[album.id]]" class="album__link"></a>
                    <div class="frame__img">
                        <img class="album_img" ng-show="album.img" ng-src="{{ path_img_album_thums }}[[ album.img ]]" />
                        <img class="album_img" ng-show="!album.img" ng-src="{{ path_img_album_thums }}[[ album.images[0].name ]]" />

                    </div>
                    <img class="frame" src="/var/www/creativer/web/img/frame.png" />
                    <div class="album__element-block">
                        <a href="#/album/[[album.id]]" class="album__element-name">[[ album.name ]]</a>
                        <div class="left-info__album user__text-gray margin-left_10"><span class="glyphicon glyphicon-eye-open"></span> <span class="fs_0-9">[[ album.views || 0 ]]</span></div>
                        <div class="right-info__album user__text-gray margin-right_10"><span class="glyphicon glyphicon-thumbs-up"></span> <span class="fs_0-9">[[ album.likes ]]</span></div>
                    </div>
                </div>



                <div class="row margin-top_40 text-center user__text pointer" ng-show="user.albums.length > 3 && count_albums < user.albums.length" ng-click="count_albums = user.albums.length">
                    Показать остальные альбомы <span class="glyphicon glyphicon-menu-down"></span>
                </div>

                <div class="row margin-top_40 text-center user__text pointer" ng-show="user.albums.length > 3 && count_albums == user.albums.length" ng-click="count_albums = 3">
                    Скрыть альбомы <span class="glyphicon glyphicon-menu-up"></span>
                </div>

                <div class="row margin-top_25 text-center user__text" ng-if="(user.albums.length == 0) && (user.id == $root.id_user)">
                    Альбомов ещё нет, <a href="#/create_album">создать альбом</a>
                </div>


                <div class="row margin-top_25 text-center user__text fs_1-2 lobster" ng-if="(user.albums.length == 0) && (user.id != $root.id_user)">
                    Пусто
                </div>

                <h4 class="lobster margin-top_20 text-gray">Стена</h4>

                <div ng-click="attache = true" style="width: 550px;">
                    {% if is_granted('ROLE_USER') %}
                        <textarea msd-elastic="" class="text-gray" cols="73" rows="2" placeholder="Написать сообщение" ng-blur="focus = false" ng-focus="focus = true" ng-model="text_post" style="height: 50px;"></textarea>
                    {% endif %}
                    <div class="row col-sm-12 padding-right_0">
                        <div class=" upload__element" ng-repeat="(key, item) in uploader.queue">
                            <span class="glyphicon glyphicon-remove close_image ng-isolate-scope" ng-click="removeImg(key); item.remove();"></span>
                            <div ng-show="uploader.isHTML5" ng-thumbperson="{ file: item._file, height: 100 }" class="text-center thumb__upload padding-right_5 left">
                            </div>
                        </div>
                    </div>
                    <div class="row col-sm-12 padding-right_5" ng-show="uploader.progress">
                        <div class="progress" nv-file-over="" uploader="uploader" over-class="another-file-over-class" class="well my-drop-zone text-center">
                            <div class="progress-bar progress-bar-warning progress-bar-striped" role="progressbar" ng-style="{ 'width': uploader.progress + '%' }">[[ uploader.progress ]] %</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="margin-left_5" ng-show="text_post || attache">
                                <label class="text-blue glyphicon glyphicon-paperclip add__files ng-isolate-scope pointer">
                                    <input type="checkbox" class="hidden">
                                    <div class="add__files__menu text-white">
                                        <ul class="margin-top_10 padding-left_0 margin-left_30">
                                            <li>
                                                <label for="uploadImg">
                                                    Фото
                                                </label>
                                            </li>
                                            <li>Документ</li>
                                            <li>Видеозапись</li>
                                            <li>Аудиозапись</li>
                                        </ul>
                                    </div>
                                </label>
                            </div>
                            <input type="file" nv-file-select="" uploader="uploader" multiple id="uploadImg"  class="hidden" ng-disabled="uploader.isUploading" />
                        </div>
                        <div class="col-sm-6">
                            <div ng-show="text_post" class="text-right col-sm-12">
                                <button class="true fs_0-9" ng-class="{'loader':loader}" ng-click="savePost(user.wall,user.wall.id,text_post)">Отправить</button>
                                <button class="false fs_0-9" ng-click="text_post=''">Отменить</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row margin-top_10 one_post" ng-init="post.remove_post = false" ng-repeat="(key, post) in user.wall.posts">

                    <div class="col-sm-2">
                        <div class="user__avatar-mini">
                            <img ng-if="post.user.avatar" ng-src="[[ post.user.avatar ]]">
                            <img ng-if="!post.user.avatar" ng-src="[[ user.avatar ]]">
                        </div>
                    </div>
                    <div class="col-sm-10 padding-left_0" ng-init="edits=false">
                        <div ng-if="!post.user" class="col-sm-6 user__text_bold padding-left_0">[[ user.username ]] [[ user.lastname ]]</div>
                        <a href="#/[[ post.user.id ]]" ng-if="post.user" class="pointer col-sm-6 user__text_bold padding-left_0">[[ post.user.username ]] [[ post.user.lastname ]]</a>
                        {% if is_granted('ROLE_USER') %}
                           <div ng-if="((user.id == id_user && !post.user) || (post.user.id == id_user)) && (post.remove_post == false)" ng-show="edits == false" class="col-sm-6 text-right edit_post">
                                <span class="text-gray glyphicon glyphicon-pencil pointer" editer_post ng-click="editPost(post.id)"></span>
                                <span ng-click="post.remove_post = true">
                                    <span class="text-gray glyphicon glyphicon-remove pointer"></span>
                                </span>
                           </div>

                            <div ng-if="edits" class="col-sm-6 text-right">
                                <span class="text-blue pointer" complete_edit>Завершить</span>
                            </div>


                            <div ng-if="(user.id == id_user && post.user) && post.remove_post == false"  class="col-sm-6 text-right edit_post">
                                <span ng-click="post.remove_post = true">
                                    <span class="text-gray glyphicon glyphicon-remove pointer"></span>
                                </span>
                            </div>

                            <div ng-if="post.remove_post == true" class="col-sm-6 text-right">
                                Удалить ?
                                <span class="text-blue pointer" ng-click="removePost(post.id,key)">Да</span> |
                                <span ng-click="post.remove_post = false" class="text-blue pointer">Нет</span>
                            </div>
                        {%  endif %}
                        <div class="col-sm-12 margin-top_10 padding-left_0 padding-right_0" ng-if="post" ng-init="imaging(post)">
                            <div class="left upload__element" ng-repeat="img in post.post_images">
                                <img_post id_img="[[ img.id ]]" ng-if="img.new" remove_img_post></img_post>
                                <img_post id_img="[[ img.id ]]"></img_post>
                                <img src="{{ path_img_post_thums }}[[ img.name ]]" height="[[ img.height ]]" width="[[ img.width ]]" style="margin-right: 1px; margin-left: 1px; margin-bottom: 3px;">
                            </div>
                        </div>
                        <div class="col-sm-10 padding-left_0">
                            <p class="user__text text-left col-sm-12 padding-left_0 user__text__post" >[[post.text]]</p>
                        </div>

                        <div class="row">
                            <div class="col-sm-10 col-sm-offset_2 attacher">
                            </div>
                        </div>

                        <div class="row col-sm-12 padding-right_0 progress__wrapper" ng-show="editUploaderPost.progress">

                        </div>

                        <div class="row">
                            {% if is_granted('ROLE_USER') %}
                                <div class="col-sm-6 user__text-blue"><span class="text-blue pointer" ng-show="!post.comments[0]" ng-click="com='true'">Комментировать</span></div>
                            {%  endif %}
                            <div class="col-sm-6 text-right"><time class="comment_time padding-right_15">[[ post.date | date: "dd.MM.yyyy" ]]</time></div>
                        </div>
                    </div>


                    <div class="row margin-left_60 col-sm-11 one_comment" ng-repeat="(key,comment) in post.comments">
                        <div class="col-sm-11 margin-left_25 margin-top_10 slid__comment__line"></div>
                        <div class="col-sm-2">
                            <div class="user__avatar-super-mini">
                                <img ng-if="comment.user" ng-src="[[ comment.user.avatar ]]">
                                <img ng-if="!comment.user" ng-src="[[ user.avatar ]]">
                            </div>
                        </div>
                        <div class="col-sm-10 padding-left_0">
                            <div class="col-sm-6 user__text_bold" ng-if="comment.user">[[ comment.user.username ]] [[ comment.user.lastname ]]</div>
                            <div class="col-sm-6 user__text_bold" ng-if="!comment.user">[[ user.username ]] [[ user.lastname ]]</div>
                            <div ng-if="((user.id == id_user) || (comment.user.id == id_user)) && !comment.remove_comment"  class="col-sm-6 text-right edit_comment">
                                <span ng-click="comment.remove_comment = true">
                                    <span class="text-gray glyphicon glyphicon-remove pointer"></span>
                                </span>
                            </div>

                            <div ng-if="comment.remove_comment == true" class="col-sm-6 text-right">
                                Удалить ?
                                <span class="text-blue pointer" ng-click="removeComment(key,post.comments,comment.id)">Да</span> |
                                <span ng-click="comment.remove_comment = false" class="text-blue pointer">Нет</span>
                            </div>

                            <div class="user__text col-sm-12">[[comment.text]]</div>
                            <time class="text-gray comment_time col-sm-12">[[ comment.date | date: "dd.MM.yyyy HH:mm" ]]</time>

                        </div>
                    </div>
                    <div class="row margin-left_60 col-sm-11" ng-show="post.comments[0] || com">
                        {% if is_granted('ROLE_USER') %}
                            <textarea msd-elastic="" class="text-gray margin-left_20 margin-top_10"  ng-model="text_comment" cols="63" rows="1" placeholder="Комментировать" style="width: 455px;"></textarea>
                            <div ng-show="text_comment" class="margin-top_5 margin-left_20 text-right" style="margin-right: 15px;">
                                <button class="true fs_0-9" ng-class="{'loader': loader}" ng-click="saveComment(post,post.id,text_comment)">Отправить</button>
                                <button class="false fs_0-9" ng-click="text_comment=''">Отменить</button>
                            </div>
                        {%  endif %}
                    </div>

                </div>
            </div>

        </div>











