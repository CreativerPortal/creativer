{% extends "CreativerFrontBundle::layout.html.twig" %}
{% block title %}Регистрация{% endblock %}
    {% block stylesheets %}
        <link rel="stylesheet" href="/css/pages/vendor.css">
        <link rel="stylesheet" href="/css/pages/registration.css">
        <link rel="stylesheet" href="/css/ng-img-crop.css">
        <link rel="stylesheet" href="/css/vendor/component.css" />
        <link rel="stylesheet" href="/css/fonts.css">
        <link rel="stylesheet" href="/css/sprites.css">
        <link rel="stylesheet" href="/css/header.css">
        <link rel="stylesheet" href="/css/footer.css">
        <link rel="stylesheet" href="/css/helpers.css">
    {% endblock %}

    {% block javascripts %}
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        <script src="/js/vendor.js"></script>
        <script src="/js/ng-img-crop.js"></script>
        <script src="/js/controllers/registration.js"></script>

        <script>
            var polyfilter_scriptpath = '/js/vendor/';
        </script>

        <script src="/js/cssParser.js"></script>
        <script src="/js/css-filters-polyfill.js"></script>
    {% endblock %}

{% block body %}

    <div class="row slid">

        <div class="row"><h3 class="lobster margin-left_0">Регистрация</h3></div>

        <form action="{{ path('creativer_front_registration') }}" method="post" class="row form-registration" name="registration"  ng-app="app" ng-controller="Ctrl">
            <div class="row">
                <div class="col-sm-6">
                    <div class="row col-sm-12">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-registration__element"><label for="name">Имя:</label></div>
                                <div class="form-registration__element"><label for="name">Фамилия:</label></div>
                                <div class="form-registration__element"><label for="email">E-mail:</label></div>
                                <div class="form-registration__element"><label for="password">Пароль:</label></div>
                                <div class="form-registration__element"><label for="password_repeat">Пароль ещё раз:</label></div>
                            </div>

                            <div class="col-sm-6 padding-right_0">
                                {{ form_row(form._token) }}
                                {% if form.vars.value %}
                                    {% set username = 'username="' ~ form.vars.value.username ~ '"' %}
                                    {% set lastname = 'lastname="' ~ form.vars.value.lastname ~ '"' %}
                                    {% set email = 'email="' ~ form.vars.value.email ~ '"' %}
                                {% else %}
                                    {% set username = 'username=""' %}
                                    {% set lastname = 'lastname=""' %}
                                    {% set email = 'email=""' %}
                                {% endif %}

                                <div class="form-registration__element">{{  form_widget(form.username, {'attr': {'class': 'name','id': 'name','name': 'username', 'ng-model': 'username', 'ng-init': username, 'ng-required': 'true'}}) }}</div>
                                <span class="text-danger ng-hide" ng-show="submitted && registration['form[username]'].$error.required">Имя пользователя не может быть пустым</span>
                                <div class="form-registration__element">{{  form_widget(form.lastname, {'attr': {'class': 'name','id': 'name','name': 'lastname', 'ng-model': 'lastname', 'ng-init': lastname, 'ng-required': 'true'}}) }}</div>
                                <span class="text-danger ng-hide" ng-show="submitted && registration['form[lastname]'].$error.required">Фамилия пользователя не может быть пустой</span>
                                <div class="form-registration__element">{{  form_widget(form.email, {'attr': {'class': 'email','id': 'email','name': 'email', 'ng-model': 'email', 'ng-init': email, 'ng-required': 'true'}}) }}</div>
                                <span class="text-danger ng-hide" ng-show="submitted && registration['form[email]'].$error.required">Email не может быть пустым</span>
                                <div class="form-registration__element">{{  form_widget(form.password.first, {'attr': {'class': 'password','id': 'password','name': 'password', 'ng-model': 'password.first'}}) }}</div>
                                <div class="form-registration__element">{{  form_widget(form.password.second, {'attr': {'class': 'password','id': 'password','name': 'password', 'ng-model': 'password.second'}}) }}</div>
                                <span class="text-danger ng-hide" ng-show="submitted && (password.first != password.second)">Паролт не совпадают</span>
                            </div>

                        </div>
                        <div class="margin-top_40 form-registration__text form-registration__text-blue">
                            <span class="md-trigger md-setperspective" data-toggle="modal" data-target="#myModal">Прочтите условия соглашения</span>
                        </div>
                        <div class="form-registration__text margin-top_10">
                            <input style="position: absolute; top: -9999px; left: -9999px" id="condition" name="condition" type="checkbox" required="required" ng-model="checked">
                            <label class="condition left" for="condition"></label>
                            <label class="margin-left_5 pointer" style="background: none; padding: 0px;" for="condition">Я согласен</label>
                        </div>

                        <div class="row">
                            <ul>
                                {% for error in errors %}
                                    <li class="text-danger">{{ error }}</li>
                                {% endfor %}
                            </ul>
                        </div>

                        <div class="margin-top_40">
                            <button type="submit" class="form-registration__submit" id="send" ng-disabled="!checked" ng-click="(submitted = true)">Отправить</button>
                            <button type="reset" class="form-registration__reset">Отменить</button>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 padding-left_0">
                    <div class="upload_img margin-left_0">
                        <span class="form-registration__img" ng-model="myImage">
                            <img src="[[myCroppedImage]]" ng-init="myImage = '{% if img is defined %}{{ img|escape  }}{% endif %}'" >
                        </span>
                        <label class="form-registration__text-blue">Загрузить ваше фото <input type="file" id="fileInput" style="display: none;" /></label>
                        <input type="hidden" name="form[img]" value="[[ myCroppedImage ]]">
                        <div>
                            <div class="cropArea" style="zoom: reset;" {% if img is defined %} style="display:none;" {% endif %}>
                                <img-crop  image="myImage" result-image="myCroppedImage" result-image-size="120" ></img-crop>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </form>

    </div>

    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="background-color: #eae9e3;">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title lobster" id="myModalLabel">Условия</h4>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button class="true fs_0-9" data-dismiss="modal">Закрыть</button>
                </div>
            </div>
        </div>
    </div>

    <style>
        .modal-backdrop{
            background-color: #6F5F56;
        }
    </style>


{% endblock %}
